(this["webpackJsonpbuy-token-app"]=this["webpackJsonpbuy-token-app"]||[]).push([[0],{231:function(e,t,n){},280:function(e,t,n){},304:function(e,t){},312:function(e,t){},468:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(46),o=n.n(r),s=(n(280),n(8)),i=n(202),l=n(475),u=n(269),d=n(485),b=n(85),p=n(487),j=n(263),f=n(264),h=n(492),O=n(3),m=n(17),g=n(20),y=n(4),x=n.n(y),w=n(25),v=n(268),S=n(477),k=n(484),T=n(481),I=n(488),C=n(478),D=n(489),P=n(491),N=n(270),_=n(21),B=n(132),F=n(87),A=n.n(F),E=n(178),U=n.n(E),G="http://194.233.77.91:8089/v1",W="auth-1";function L(){return JSON.parse(U.a.get(W,{decrypt:!0}))}function M(e){U.a.set(W,JSON.stringify(e),{encrypt:!0})}function V(){U.a.remove(W)}var q=function(e,t){return A.a.post(G+"/login",{username:e,password:t},{headers:{Accept:"application/json","Content-Type":"application/json"}})},R=function(e,t){return A.a.post(G+"/register",{username:e,password:t},{headers:{Accept:"application/json","Content-Type":"application/json"}})},K=function(e,t,n){return A.a.put(G+"/update-password",{username:e,newPassword:t,token:n},{headers:{Accept:"application/json","Content-Type":"application/json"}})},H=function(e,t){return A.a.get(G+"/verify/".concat(e,"/").concat(t))},J=function(e,t){return A.a.get(G+"/get-nodes/".concat(e,"/").concat(t))},Y=function(e,t){return A.a.get(G+"/logout/".concat(e,"/").concat(t))},z=n(2),Q=["key","name","fieldKey"],X=null,Z=null,$=null,ee=null,te={wrapperCol:{offset:8,span:16}},ne=function(e){var t=e.accounts,n=e.setAccounts,c=e.inFo,r=Object(a.useState)(!1),o=Object(s.a)(r,2),i=o[0],l=o[1],d=Object(a.useState)(!1),p=Object(s.a)(d,2),j=p[0],f=p[1],h=Object(a.useState)(""),y=Object(s.a)(h,2),F=y[0],A=y[1],E=Object(a.useState)(""),U=Object(s.a)(E,2),G=U[0],W=U[1];Object(a.useEffect)((function(){M()}),[]);var M=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X=new _.a.providers.WebSocketProvider("ws://194.233.73.12:3000"),Z=X._websocket.onopen,$=X._websocket.onclose,X._websocket.onopen=function(e){return V(e)},X._websocket.onclose=function(e){return q(e)};case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),ee=setInterval((function(){X._websocket.readyState!==WebSocket.OPEN&&X._websocket.readyState!==WebSocket.OPENING&&X._websocket.close()}),3e3),Z&&Z(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(ee),M(),$&&$(e)},R=function(e){var n=t.get(e);return"Address: ".concat(n?n.address:"N/A"," - Balance: ").concat(n?n.bnbAmount:"N/A"," BNB")};return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(S.a,{name:"dynamic_form_nest_item",autoComplete:"off",className:"content_form",style:{height:"1000px"},children:[Object(z.jsxs)(k.b,{title:"Billing",bordered:!0,children:[Object(z.jsx)(k.b.Item,{label:"UserName",children:c.username}),Object(z.jsxs)(k.b.Item,{label:"Ng\xe0y h\u1ebft h\u1ea1n",span:3,children:[" ",c.expireDate]}),Object(z.jsx)(k.b.Item,{label:"Gia h\u1ea1n",children:Object(z.jsxs)("span",{children:["Li\xean h\u1ec7",Object(z.jsx)("a",{href:"https://t.me/LeonardoDN",target:"_blank",children:" LeonardoDN "})," ho\u1eb7c tham gia group ",Object(z.jsx)("a",{href:"https://t.me/gemslab",target:"_blank",children:"gemslab"})]})}),Object(z.jsx)(k.b.Item,{label:"Action",span:3,children:Object(z.jsx)("a",{onClick:function(){f(!0)},children:"Change Password"})})]}),Object(z.jsxs)(T.a,{title:"Update user",visible:j,confirmLoading:i,onCancel:function(){return f(!1)},okText:Object(z.jsx)(I.a,{title:"Are you sure?",onConfirm:function(){return function(){if(F===G){l(!0);var e=L();K(e.username,F,e.token).then((function(e){1===e.data.code?(u.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),f(!1)):u.b.error(e.data.message)})).finally((function(){l(!1)}))}else u.b.error("M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp")}()},okText:"Yes",cancelText:"No",children:"Save"}),children:[Object(z.jsx)(S.a.Item,{name:["newpass"],fieldKey:["newpass"],rules:[{required:!0}],children:Object(z.jsx)(C.a.Password,{placeholder:"new password",onChange:function(e){A(e.target.value)}})}),Object(z.jsx)(S.a.Item,{name:["confirmpass"],fieldKey:["confirmpass"],rules:[{required:!0}],children:Object(z.jsx)(C.a.Password,{placeholder:"confirm password",onChange:function(e){W(e.target.value)}})})]}),Object(z.jsx)(k.b,{title:"Wallets",style:{marginTop:"10px"},children:Object(z.jsx)(k.b.Item,{children:Object(z.jsx)("div",{children:Object(z.jsx)(S.a.List,{name:"accounts",initialValue:[0],children:function(e,a){var c=a.add,r=a.remove;return Object(z.jsxs)(z.Fragment,{children:[e.map((function(a,c){var o=a.key,s=a.name,i=a.fieldKey,l=Object(g.a)(a,Q);return Object(z.jsxs)(D.b,{style:{display:"flex",marginBottom:25},align:"start",children:[Object(z.jsx)(S.a.Item,Object(O.a)(Object(O.a)({},l),{},{name:[s,"privateKey"],fieldKey:[i,"privateKey"],rules:[{required:!0,message:"Missing account privateKey"}],label:"Account ".concat(c+1),style:{width:"900px"},help:R(i),children:Object(z.jsx)(C.a.Password,{placeholder:"Account privateKey",onChange:function(e){var a,c,r=e.target.value;try{var o=new B.a(r,X);X.getBalance(o.address).then((function(e){console.log("account.address ",o.address,"balance ",_.a.utils.formatEther(e));var a=new Map(Object(m.a)(t));a.set(i,{fieldKey:i,privateKey:r,address:o.address,bnbAmount:_.a.utils.formatEther(e)}),n(a)}))}catch(s){a="error",c="Error fetching balance, check private key!",v.a[a]({message:c})}}})})),e.length>1?Object(z.jsx)(P.a,{onClick:function(){r(s);var e=new Map(Object(m.a)(t));e.delete(i),n(e)}}):null]},o)})),Object(z.jsx)(S.a.Item,Object(O.a)(Object(O.a)({},te),{},{children:Object(z.jsx)(b.a,{type:"dashed",onClick:function(){return c()},icon:Object(z.jsx)(N.a,{}),children:"Add account"})}))]})}})})})})]})})},ae=n(53),ce=n(127),re=n(82),oe=n(479),se=n(486),ie=n(473),le=n(474),ue=[{id:"t6",desctiption:"T-6",second:6},{id:"t5",desctiption:"T-5",second:5},{id:"t4",desctiption:"T-4",second:4},{id:"t3",desctiption:"T-3",second:3},{id:"t2",desctiption:"T-2",second:2},{id:"t1",desctiption:"T-1",second:1}],de="onTimeSale",be="spam",pe=n(476),je=function(e){return _.a.utils.isAddress(e)},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd MMM yyyy",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hh:mm aaa";return"".concat(Object(pe.a)(new Date(e),t)," at ").concat(Object(pe.a)(new Date(e),n))},he=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4.5;v.a[e]({message:t,duration:n})},Oe=function(e){return!isNaN(String(e))&&!isNaN(parseFloat(String(e)))},me=1e-4,ge=null,ye=null,xe=null,we=null,ve=new Set,Se=1,ke=0,Te=0,Ie=0,Ce=0,De={wrapperCol:{offset:8,span:16}},Pe=function(e){var t=e.accounts,n=e.nodeUrl,c=Object(a.useState)(de),r=Object(s.a)(c,2),o=r[0],i=(r[1],Object(a.useState)("")),l=Object(s.a)(i,2),d=l[0],j=l[1],f=Object(a.useState)(0),h=Object(s.a)(f,2),g=h[0],y=h[1],v=S.a.useForm(),k=Object(s.a)(v,1)[0],T=Object(a.useState)(),I=Object(s.a)(T,2),P=I[0],N=I[1],F=Object(a.useState)(""),A=Object(s.a)(F,2),E=A[0],U=A[1],G=Object(a.useState)(!1),W=Object(s.a)(G,2),L=W[0],M=W[1],V=Object(a.useState)(me),q=Object(s.a)(V,2),R=q[0],K=q[1],H=Object(a.useState)("10"),J=Object(s.a)(H,2),Y=J[0],Q=J[1],X=Object(a.useState)("400000"),Z=Object(s.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(60),ne=Object(s.a)(te,2),pe=ne[0],Pe=(ne[1],Object(a.useState)(!1)),Ne=Object(s.a)(Pe,2),_e=Ne[0],Be=Ne[1],Fe=Object(a.useState)([]),Ae=Object(s.a)(Fe,2),Ee=Ae[0],Ue=Ae[1],Ge=Object(a.useState)([ue[2],ue[3]]),We=Object(s.a)(Ge,2),Le=We[0],Me=We[1],Ve=Ee.length>0&&je(E)&&Oe(R)&&Oe($)&&Oe(Y)&&parseFloat(R)>0&&parseFloat($)>0&&parseFloat(Y);Object(a.useEffect)((function(){qe()}),[n]);var qe=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.startsWith("http")?(ge=new _.a.providers.JsonRpcProvider(n),console.log("http",n)):(ge=new _.a.providers.WebSocketProvider(n),ye=ge._websocket.onopen,xe=ge._websocket.onclose,ge._websocket.onopen=function(e){return Re(e)},ge._websocket.onclose=function(e){return Ke(e)});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),we=setInterval((function(){ge._websocket.readyState!==WebSocket.OPEN&&ge._websocket.readyState!==WebSocket.OPENING&&ge._websocket.close()}),1e3),ye&&ye(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(we),qe(),xe&&xe(e)};Object(a.useEffect)((function(){(function(){var e=Object(w.a)(x.a.mark((function e(){var t,n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je(E)){e.next=15;break}return e.prev=1,t=new _.a.Contract(E,["function presaleStartTime() external view returns (uint256)"],ge),e.next=5,t.presaleStartTime();case 5:n=e.sent.toNumber(),a=1e3*n,console.log("presaleStartTime ",a),Object(ie.a)(new Date,new Date(a))?M(!0):(M(!1),N(a)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),u.b.error("Error fetching presale start time");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}})()()}),[E]),Object(a.useEffect)((function(){return Se=setInterval((function(){if(o===be&&_e){var e=Date.now();0===Te&&(Te=Date.now());var n=(e-Te)/1e3;if(console.log("".concat(Te," - ").concat(e," gap ").concat(n," counter ").concat(Ie)),n>1)return console.log("".concat(Te," - ").concat(e," reset counter")),Ie=0,void(Te=e);if(Ie===pe)return void console.log("".concat(Te," - ").concat(e," reach limit"));Ie++;var a,c=Ee.filter((function(e){return void 0!==t.get(e.fieldKey)})),r=Object(ae.a)(c);try{for(r.s();!(a=r.n()).done;){var s=a.value;console.log("Buy at middle of presale - spam, account: ".concat(s.address," is buying at presale adress: ").concat(E)),He(s.privateKey,E,R,Y,!1)}}catch(i){r.e(i)}finally{r.f()}}}),10),function(){clearInterval(Se)}}),[_e]);Object(a.useEffect)((function(){return ke=setTimeout((function(){y(function(){var e=Object(le.a)(P,new Date);if(e>0&&o===de&&_e){var n,a=e/1e3,c=Object(ae.a)(Le);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(a<=r.second&&Math.ceil(a)===r.second&&!ve.has(r.second)){ve.add(r.second);var s,i=Ee.filter((function(e){return void 0!==t.get(e.fieldKey)})),l=Object(ae.a)(i);try{for(l.s();!(s=l.n()).done;){var u=s.value;console.log("Buy time when start, account: ".concat(u.address," is buying at presale adress: ").concat(E)),He(u.privateKey,E,R,Y,!1)}}catch(f){l.e(f)}finally{l.f()}break}}}catch(f){c.e(f)}finally{c.f()}Ce===Ee.length&&(Ce=0,Be(!1))}var d=6e4,b=36e5,p=24*b,j={};return e>0&&(j={day:Math.floor(e/p),hour:Math.floor(e%p/b),minute:Math.floor(e%b/d),second:Math.floor(e%d/1e3)}),j}())}),500),function(){clearInterval(ke)}}),[g]);var He=function(){var e=Object(w.a)(x.a.mark((function e(t,n){var a,c,r,o,s,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.length>2&&void 0!==i[2]?i[2]:me,c=i.length>3&&void 0!==i[3]?i[3]:5,r=i.length>4&&void 0!==i[4]&&i[4],o=null,s=null,e.prev=5,s=new B.a(t,ge),o=s.address,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(5),console.log("error fetching account ",e.t0),j((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(s.address," error fetching, check your private key!\n")})),e.abrupt("return");case 15:e.prev=15,new _.a.Contract(n,["function tokenPurchase(address _beneficiary, uint256 _amount) external payable"],s).tokenPurchase(o,0,{gasLimit:Number($.toString()),gasPrice:_.a.utils.parseUnits(c.toString(),"gwei"),value:_.a.utils.parseEther(a.toString(),18)}).then((function(e){j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(o," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,",waiting for transaction to be executed...\n")})),e.wait().then((function(e){j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(o," Buying successfully, Transaction receipt : https://www.bscscan.com/tx/").concat(e.transactionHash,"\n")})),u.b.success("Buy successfully"),Ce++})).catch((function(e){console.log("Transaction receipt has error ",e),j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))})).catch((function(e){console.log("tokenPurchase async error ",e),j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))})),e.next=28;break;case 20:if(e.prev=20,e.t1=e.catch(15),console.log("TokenPurchase has error ",e.t1),"INSUFFICIENT_FUNDS"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=27;break}return r&&he("error","Account: ".concat(s.address,' buy token failed - "INSUFFICIENT_FUNDS\n')),j((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(s.address,' buy token failed - "INSUFFICIENT_FUNDS\n')})),e.abrupt("return");case 27:j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e.t1,"\n")}));case 28:case"end":return e.stop()}}),e,null,[[5,10],[15,20]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(S.a,{form:k,name:"DxSaleTab_form",className:"content_form",layout:"vertical",children:[Object(z.jsxs)(ce.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(re.a,{span:14,children:[Object(z.jsx)(S.a.Item,{label:"Presale Contract",name:"presale address",rules:[{required:!0,message:"Please input presale address!"}],children:Object(z.jsx)(C.a,{placeholder:"Presale Contract",disabled:_e,onChange:function(e){M(!1),N(0),y({}),U(e.target.value)}})}),Object(z.jsxs)("p",{style:{marginTop:"10px",display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"Start at:"})," ",L?Object(z.jsx)("b",{style:{color:"red"},children:"Presale has already been over!"}):je(E)&&P?fe(P):"---"]}),Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"Countdown:"})," ",P&&!L&&"hour"in g?"".concat(g.day,":").concat(g.hour,":").concat(g.minute,":").concat(g.second):"---"]})]}),Object(z.jsx)(S.a.Item,{label:"BNB amount",name:"BNB_amount",rules:[{required:!0,message:"Please input BNB amount!"}],initialValue:R,step:"0.1",children:Object(z.jsx)(oe.a,{min:0,style:{width:"100%"},disabled:_e,onChange:function(e){return K(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas price",name:"Gas_price (gwei)",rules:[{required:!0,message:"Please input Gas price!"}],initialValue:Y,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:_e,onChange:function(e){return Q(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas limit (gwei)",name:"Gas_limit",rules:[{required:!0,message:"Please input Gas limit!"}],style:{marginTop:"30px"},initialValue:$,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:_e,onChange:function(e){return ee(e)}})}),Object(z.jsxs)(D.b,{direction:"vertical",children:["Buy when sale start",Object(z.jsx)(se.a.Group,{onChange:function(e){return Me(e)},defaultValue:Le,disabled:_e,children:Object(z.jsx)(D.b,{direction:"vertical",children:ue.map((function(e){return Object(z.jsxs)(se.a,{value:e,children:["Buy at ",Object(z.jsx)("b",{children:e.desctiption})]})}))})})]})]}),Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(p.a,{title:"Accounts",bordered:!0,children:Object(z.jsx)(se.a.Group,{disabled:_e,onChange:function(e){return Ue(e)},children:Object(z.jsx)(D.b,{direction:"vertical",children:Object(m.a)(t.values()).map((function(e,t){return Object(z.jsxs)(se.a,{value:e,children:["Account ",t+1," - ",e.bnbAmount," ",Object(z.jsx)("b",{children:"BNB"})]},e.address)}))})})})})]}),Object(z.jsx)(S.a.Item,Object(O.a)(Object(O.a)({},De),{},{children:Object(z.jsxs)(D.b,{children:[Object(z.jsx)(b.a,{type:"primary",style:{width:"100px"},disabled:_e||!Ve,onClick:function(){k.validateFields().then((function(e){Be(!0)}))},loading:_e,children:_e?o===de?"Waiting":"Buying":"Buy"}),Object(z.jsx)(b.a,{type:"dashed",danger:!0,style:{width:"100px"},onClick:function(){Be(!1),ve=new Set,Ie=0,Te=0,Ce=0},children:"Stop"})]})}))]}),Object(z.jsx)(C.a.TextArea,{rows:11,placeholder:"logs...",value:d})]})},Ne="buyRoundOne",_e=function(e){return A.a.get("https://api-pcakev2.unicrypt.network/api/v1/presales/info/"+e)},Be=null,Fe=null,Ae=null,Ee=null,Ue=1,Ge=!1,We=0,Le={wrapperCol:{offset:8,span:16}},Me=function(e){var t=e.accounts,n=e.nodeUrl,c=Object(a.useState)(Ne),r=Object(s.a)(c,2),o=r[0],i=(r[1],Object(a.useState)("")),l=Object(s.a)(i,2),d=l[0],j=l[1],f=S.a.useForm(),h=Object(s.a)(f,1)[0],g=Object(a.useState)(),y=Object(s.a)(g,2),v=y[0],k=y[1],T=Object(a.useState)(""),I=Object(s.a)(T,2),P=I[0],N=I[1],F=Object(a.useState)(me),A=Object(s.a)(F,2),E=A[0],U=A[1],G=Object(a.useState)("10"),W=Object(s.a)(G,2),L=W[0],M=W[1],V=Object(a.useState)("250000"),q=Object(s.a)(V,2),R=q[0],K=q[1],H=Object(a.useState)(!1),J=Object(s.a)(H,2),Y=J[0],Q=J[1],X=Object(a.useState)([]),Z=Object(s.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(""),ne=Object(s.a)(te,2),ie=ne[0],le=ne[1],ue=$.length>0&&je(P)&&Oe(E)&&Oe(R)&&Oe(L)&&parseFloat(E)>0&&parseFloat(R)>0&&parseFloat(L);Object(a.useEffect)((function(){de()}),[n]);var de=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.startsWith("http")?(Be=new _.a.providers.JsonRpcProvider(n),console.log("http",n)):(Be=new _.a.providers.WebSocketProvider(n),Fe=Be._websocket.onopen,Ae=Be._websocket.onclose,Be._websocket.onopen=function(e){return be(e)},Be._websocket.onclose=function(e){return pe(e)});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),Ee=setInterval((function(){Be._websocket.readyState!==WebSocket.OPEN&&Be._websocket.readyState!==WebSocket.OPENING&&Be._websocket.close()}),1e3),Fe&&Fe(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(Ee),de(),Ae&&Ae(e)};Object(a.useEffect)((function(){var e=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Be.getBlockNumber().then((function(e){le(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Ue=setInterval((function(){e()}),500),function(){clearInterval(Ue)}}),[]),Object(a.useEffect)((function(){(function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je(P))try{_e(P).then((function(e){var t=e.data.start_block;console.log("blockOpenR1: "+t),k(t)})).catch((function(e){u.b.error("Error fetching presale blockOpen")}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[P]);var fe=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o===Ne&&Be.on("block",function(){var e=Object(w.a)(x.a.mark((function e(n){var a,c,r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===v-2&&Ge){Ge=!1,a=$.filter((function(e){return void 0!==t.get(e.fieldKey)})),c=Object(ae.a)(a);try{for(c.s();!(r=c.n()).done;)o=r.value,he(o.privateKey)}catch(s){c.e(s)}finally{c.f()}}We===$.length&&(We=0,Q(!1),Ge=!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(w.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=null,e.prev=2,a=new B.a(t,Be),n=a.address,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),console.log("error fetching account ",e.t0),j((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(a.address," error fetching, check your private key!\n")})),e.abrupt("return");case 12:e.prev=12,console.log("".concat(a.address," sell gasLimit: ").concat(R,", gasPrice: ").concat(L," bnbAmount: ").concat(E," ")),We++,new _.a.Contract(P,["function userDeposit(uint256 _amount) external payable"],a).userDeposit("0",{gasLimit:R.toString(),gasPrice:_.a.utils.parseUnits(L.toString(),"gwei"),value:_.a.utils.parseEther(E.toString(),18)}).then((function(e){j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(n," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,", waiting for transaction to be executed...\n")})),e.wait().then((function(e){j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(n," Buying successfully, Transaction receipt : https://www.bscscan.com/tx/").concat(e.transactionHash,"\n")})),u.b.success("Buy successfully"),We++})).catch((function(e){console.log("Transaction receipt has error ",e),j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))})).catch((function(e){console.log("userDeposit async error ",e),j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))})),e.next=26;break;case 19:if(e.prev=19,e.t1=e.catch(12),console.log("TokenPurchase has error ",e.t1),"INSUFFICIENT_FUNDS"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=25;break}return j((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(a.address,' buy token failed - "INSUFFICIENT_FUNDS\n')})),e.abrupt("return");case 25:j((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e.t1,"\n")}));case 26:case"end":return e.stop()}}),e,null,[[2,7],[12,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(S.a,{form:h,name:"UniCrypt_form",className:"content_form",layout:"vertical",children:[Object(z.jsxs)(ce.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(re.a,{span:14,children:[Object(z.jsx)(S.a.Item,{label:"Presale Contract",name:"Url",rules:[{required:!0,message:"Please input presale address!"}],defaultValue:P,children:Object(z.jsx)(C.a,{placeholder:"Presale Contract",disabled:Y,onChange:function(e){k(0),N(e.target.value)}})}),Object(z.jsxs)("p",{style:{marginTop:"10px",display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"BlockStart:"})," ",v]}),Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"LatestBlock:"})," ",ie]}),Object(z.jsx)("span",{children:Object(z.jsxs)("b",{children:["Countdown: ",v-ie>0&&v>0?v-ie:0]})})]}),Object(z.jsx)(S.a.Item,{label:"BNB amount",name:"BNB_amount",rules:[{required:!0,message:"Please input BNB amount!"}],initialValue:E,children:Object(z.jsx)(oe.a,{min:0,style:{width:"100%"},disabled:Y,onChange:function(e){return U(e)},step:"0.1"})}),Object(z.jsx)(S.a.Item,{label:"Gas price",name:"Gas_price (gwei)",rules:[{required:!0,message:"Please input Gas price!"}],initialValue:L,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:Y,onChange:function(e){return M(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas limit (gwei)",name:"Gas_limit",rules:[{required:!0,message:"Please input Gas limit!"}],style:{marginTop:"30px"},initialValue:R,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:Y,onChange:function(e){return K(e)}})}),"Buy at ",Object(z.jsx)("b",{children:"Round one"})]}),Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(S.a.Item,{children:Object(z.jsx)(p.a,{title:"Accounts",bordered:!0,children:Object(z.jsx)(se.a.Group,{onChange:function(e){return ee(e)},children:Object(z.jsx)(D.b,{direction:"vertical",children:Object(m.a)(t.values()).map((function(e,t){return Object(z.jsxs)(se.a,{value:e,children:["Account ",t+1," - ",e.bnbAmount," ",Object(z.jsx)("b",{children:"BNB"})]},e.address)}))})})})})})]}),Object(z.jsx)(S.a.Item,Object(O.a)(Object(O.a)({},Le),{},{children:Object(z.jsxs)(D.b,{children:[Object(z.jsx)(b.a,{type:"primary",style:{width:"100px"},disabled:Y||!ue,onClick:function(){h.validateFields().then((function(e){Q(!0),Ge=!0,fe()}))},loading:Y,children:Y?"Waiting":"Buy"}),Object(z.jsx)(b.a,{type:"dashed",danger:!0,style:{width:"100px"},onClick:function(){Q(!1),Ge=!1,We=0},children:"Stop"})]})}))]}),Object(z.jsx)(C.a.TextArea,{rows:20,placeholder:"logs...",value:d})]})},Ve=n(483),qe=n(480),Re=n(490),Ke="0x10ed43c718714eb63d5aa57b78b54704e256024e",He="0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",Je="0xe9e7cea3dedca5984780bafc599bd69add087d56",Ye=[{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETHSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"}],ze=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Qe="sellAll",Xe="sellApart",Ze="sellNumber",$e="BNB",et="BUSD",tt={wrapperCol:{offset:8,span:16}},nt={1:"1%",25:"25%",50:"50%",75:"75%",100:{style:{color:"#f50"},label:Object(z.jsx)("strong",{children:"100%"})}},at=null,ct=null,rt=null,ot=null,st=1,it=new Set,lt=function(e){var t=e.accounts,n=e.nodeUrl,c=Object(a.useState)(""),r=Object(s.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)([]),d=Object(s.a)(l,2),j=d[0],f=d[1],h=Object(a.useState)("6"),g=Object(s.a)(h,2),y=g[0],v=g[1],k=Object(a.useState)("1200000"),T=Object(s.a)(k,2),I=T[0],P=T[1],N=Object(a.useState)(100),F=Object(s.a)(N,2),A=F[0],E=F[1],U=Object(a.useState)(1),G=Object(s.a)(U,2),W=G[0],L=G[1],M=Object(a.useState)(!1),V=Object(s.a)(M,2),q=V[0],R=V[1],K=Object(a.useState)(Qe),H=Object(s.a)(K,2),J=H[0],Y=H[1],Q=Object(a.useState)($e),X=Object(s.a)(Q,2),Z=X[0],$=X[1],ee=Object(a.useState)(""),te=Object(s.a)(ee,2),ne=te[0],ie=te[1],le=j.length>0&&je(o);Object(a.useEffect)((function(){ue()}),[n]);var ue=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.startsWith("http")?(at=new _.a.providers.JsonRpcProvider(n),console.log("http",n)):(at=new _.a.providers.WebSocketProvider(n),ct=at._websocket.onopen,rt=at._websocket.onclose,at._websocket.onopen=function(e){return de(e)},at._websocket.onclose=function(e){return be(e)}),at.getBlockNumber().then((function(e){console.log("block ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),ot=setInterval((function(){at._websocket.readyState!==WebSocket.OPEN&&at._websocket.readyState!==WebSocket.OPENING&&at._websocket.close()}),1e3),ct&&ct(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(ot),ue(),rt&&rt(e)};Object(a.useEffect)((function(){return st=setInterval((function(){q&&it.size<j.length&&fe()}),10),function(){clearInterval(st)}}),[q]);var pe=function(e){var t=0;switch(J){case Xe:t=e*A/100;break;case Ze:t=W;break;default:t=e}return t},fe=function(){var e=Object(w.a)(x.a.mark((function e(){var n,a,c,r,s,i,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z===et?[Je,He]:[He],e.prev=1,a=j.filter((function(e){return void 0!==t.get(e.fieldKey)})),e.next=5,new _.a.Contract(o,ze,at);case 5:return c=e.sent,e.next=8,c.decimals();case 8:r=e.sent,s=Object(ae.a)(a),e.prev=10,l=x.a.mark((function e(){var t,a,s,l,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,e.prev=1,a=new B.a(t.privateKey,at),e.t0=_.a.utils,e.next=6,c.balanceOf(t.address);case 6:return e.t1=e.sent,s=e.t0.formatUnits.call(e.t0,e.t1),l=pe(s).toString(),console.log("balance ",s," ",l," ",it),e.next=12,new _.a.Contract(Ke,Ye,a);case 12:d=e.sent,s>0&&!it.has(t.address)&&(it.add(t.address),console.log("".concat(t.address," sell gasLimit: ").concat(I,", gasPrice: ").concat(y," tokens: ").concat(l)),d.swapExactTokensForETHSupportingFeeOnTransferTokens(_.a.utils.parseEther(l,r),"0",[o].concat(n),t.address,Math.floor(Date.now()/1e3)+1200,{gasLimit:I.toString(),gasPrice:_.a.utils.parseUnits(y.toString(),"gwei")}).then((function(e){ie((function(n){return"".concat(n).concat(new Date(Date.now()).toISOString()," Account: ").concat(t.address," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,", waiting for transaction to be executed...\n")})),e.wait().then((function(e){u.b.success("Sell Successfully"),ie((function(e){return" ".concat(e).concat(new Date(Date.now()).toISOString()," Sell Successfully!!! \n")})),console.log("Sell Successfully Transaction receipt : https://www.bscscan.com/tx/".concat(e.transactionHash))})).catch((function(e){console.log("Transaction receipt error ",e),ie((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))})).catch((function(e){console.log("Sell async error ",e),ie((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))),e.next=20;break;case 16:e.prev=16,e.t2=e.catch(1),console.log("Sell error ".concat(t.address),e.t2),ie((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e.t2,"\n")}));case 20:case"end":return e.stop()}}),e,null,[[1,16]])})),s.s();case 13:if((i=s.n()).done){e.next=17;break}return e.delegateYield(l(),"t0",15);case 15:e.next=13;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(10),s.e(e.t1);case 22:return e.prev=22,s.f(),e.finish(22);case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(1),console.log("Sell error  ",e.t2);case 30:case"end":return e.stop()}}),e,null,[[1,27],[10,19,22,25]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(w.a)(x.a.mark((function e(){var n,a,c,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=j.filter((function(e){return void 0!==t.get(e.fieldKey)})),a=Object(ae.a)(n),e.prev=2,r=x.a.mark((function e(){var t,n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.prev=1,n=new B.a(t.privateKey,at),a=new _.a.Contract(o,["function approve(address spender, uint256 amount)"],n),e.next=6,a.approve(Ke,"213123123123123123123123123123123213213123123123123213",{gasLimit:I.toString(),gasPrice:_.a.utils.parseUnits(y.toString(),"gwei")}).then((function(e){ie((function(n){return"".concat(n).concat(new Date(Date.now()).toISOString()," Account approve at : ").concat(t.address," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,", waiting for transaction to be executed...\n")})),e.wait().then((function(e){ie((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Approve Successfully Transaction receipt : https://www.bscscan.com/tx/").concat(e.transactionHash," \n")})),console.log("Approve Successfully Transaction receipt : https://www.bscscan.com/tx/".concat(e.transactionHash))})).catch((function(e){console.log("Waiting approveToken receipt error ",e)}))})).catch((function(e){"INSUFFICIENT_FUNDS"===(null===e||void 0===e?void 0:e.code)&&ie((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(t.address,' approveToken failed - "INSUFFICIENT_FUNDS\n')})),console.log("Approve approveToken error ".concat(t.address),e)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Approve approveToken ".concat(t.address),e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})),a.s();case 5:if((c=a.n()).done){e.next=9;break}return e.delegateYield(r(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)(S.a,{name:"DxSaleTab_form",className:"content_form",layout:"vertical",children:[Object(z.jsxs)(ce.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(re.a,{span:14,children:[Object(z.jsx)(S.a.Item,{label:"Token Address",name:"Token_Address",rules:[{required:!0,message:"Please input Token Address!"}],children:Object(z.jsx)(C.a,{placeholder:"Token Address",onChange:function(e){return i(e.target.value)}})}),Object(z.jsx)(S.a.Item,{label:"Gas price",name:"Gas_price (gwei)",rules:[{required:!0,message:"Please input Gas price!"}],initialValue:y,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:q,onChange:function(e){return v(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas limit (gwei)",name:"Gas_limit",rules:[{required:!0,message:"Please input Gas limit!"}],style:{marginTop:"30px"},initialValue:I,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:q,onChange:function(e){return P(e)}})})]}),Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(S.a.Item,{children:Object(z.jsx)(p.a,{title:"Accounts",bordered:!0,children:Object(z.jsx)(se.a.Group,{onChange:function(e){return f(e)},children:Object(z.jsx)(D.b,{direction:"vertical",children:Object(m.a)(t.values()).map((function(e,t){return Object(z.jsxs)(se.a,{value:e,children:["Account ",t+1," - ",e.bnbAmount," ",Object(z.jsx)("b",{children:"BNB"})]},e.address)}))})})})})})]}),Object(z.jsxs)(ce.a,{gutter:200,children:[Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(S.a.Item,{name:"SellType",label:"Sell Type",initialValue:J,children:Object(z.jsx)(Ve.a.Group,{onChange:function(e){return Y(e.target.value)},value:J,disabled:q,children:Object(z.jsxs)(D.b,{direction:"vertical",children:[Object(z.jsx)(Ve.a,{value:Qe,children:"Sell All"}),Object(z.jsx)(Ve.a,{value:Xe,children:"Sell %"}),Object(z.jsx)(qe.a,{marks:nt,defaultValue:100,onChange:function(e){return E(e)},style:{marginLeft:"30px"}}),Object(z.jsx)(Ve.a,{value:Ze,children:Object(z.jsxs)(D.b,{children:["Sell Number",Object(z.jsx)(oe.a,{defaultValue:1,min:0,style:{width:"100px"},onChange:function(e){return L(e)}})]})})]})})})}),Object(z.jsx)(re.a,{span:16,children:Object(z.jsx)(S.a.Item,{name:"pool",label:Object(z.jsxs)(z.Fragment,{children:["Pool ",Object(z.jsx)(Re.a,{style:{marginLeft:"10px",height:"30px"},showIcon:!0,message:"Be sure this is the pool of pair token",type:"warning"})]}),initialValue:Z,children:Object(z.jsx)(Ve.a.Group,{onChange:function(e){return $(e.target.value)},value:Z,disabled:q,children:Object(z.jsxs)(D.b,{direction:"vertical",children:[Object(z.jsx)(Ve.a,{value:$e,children:"Pair BNB - token"}),Object(z.jsx)(Ve.a,{value:et,children:"Pair BUSD - token"})]})})})})]}),Object(z.jsxs)(S.a.Item,Object(O.a)(Object(O.a)({},tt),{},{children:[Object(z.jsx)(b.a,{type:"primary",style:{width:"100px",marginRight:"10px"},disabled:q||!le,onClick:function(){he()},children:"Approve"}),Object(z.jsx)(b.a,{type:"primary",style:{width:"100px",marginRight:"10px"},disabled:q||!le,loading:q,onClick:function(){it=new Set,R(!0)},children:"Run"}),Object(z.jsx)(b.a,{type:"primary",style:{width:"100px",marginRight:"10px"},onClick:function(){R(!1),it=new Set},children:"Stop"})]})),Object(z.jsx)(C.a.TextArea,{rows:10,placeholder:"logs...",value:ne})]})},ut="BNB",dt="BUSD",bt=null,pt=null,jt=null,ft=null,ht=function(e){var t=e.accounts,n=e.nodeUrl,c=S.a.useForm(),r=Object(s.a)(c,1)[0],o=Object(a.useState)(""),i=Object(s.a)(o,2),l=i[0],d=i[1],j=Object(a.useState)([]),f=Object(s.a)(j,2),h=f[0],O=f[1],g=Object(a.useState)(1e-4),y=Object(s.a)(g,2),v=y[0],k=y[1],T=Object(a.useState)(ut),I=Object(s.a)(T,2),P=I[0],N=I[1],F=Object(a.useState)(10),A=Object(s.a)(F,2),E=A[0],U=A[1],G=Object(a.useState)("1300000"),W=Object(s.a)(G,2),L=W[0],M=W[1],V=Object(a.useState)(""),q=Object(s.a)(V,2),R=q[0],K=q[1],H=h.length>0&&je(l)&&v>0;Object(a.useEffect)((function(){J()}),[n]);var J=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.startsWith("http")?(bt=new _.a.providers.JsonRpcProvider(n),console.log("http",n)):(bt=new _.a.providers.WebSocketProvider(n),pt=bt._websocket.onopen,jt=bt._websocket.onclose,bt._websocket.onopen=function(e){return Y(e)},bt._websocket.onclose=function(e){return Q(e)});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),ft=setInterval((function(){bt._websocket.readyState!==WebSocket.OPEN&&bt._websocket.readyState!==WebSocket.OPENING&&bt._websocket.close()}),1e3),pt&&pt(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(ft),J(),jt&&jt(e)},X=function(){var e=Object(w.a)(x.a.mark((function e(){var n,a,c,r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h.filter((function(e){return void 0!==t.get(e.fieldKey)})),a=P===ut?[He]:[He,Je],c=Object(ae.a)(n),e.prev=3,o=x.a.mark((function e(){var t,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.value,e.prev=1,n=new B.a(t.privateKey,bt),e.next=5,new _.a.Contract(Ke,Ye,n);case 5:return c=e.sent,console.log("".concat(t.address," buying, gasLimit: ").concat(L,", gasPrice: ").concat(E," bnbAmount: ").concat(v," tokenInAddress: ").concat(a)),e.next=9,c.swapExactETHForTokens("0",[].concat(a,[l]),t.address,Math.floor(Date.now()/1e3)+1200,{gasLimit:L.toString(),gasPrice:_.a.utils.parseUnits(E.toString(),"gwei"),value:_.a.utils.parseEther(v.toString(),18)}).then((function(e){K((function(n){return"".concat(n).concat(new Date(Date.now()).toISOString()," Account: ").concat(t.address," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,",waiting for transaction to be executed...\n")})),e.wait().then((function(e){u.b.success("Buy Successfully"),K((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Buy Successfully!!! \n")})),console.log("Buy Successfully Transaction receipt : https://www.bscscan.com/tx/".concat(e.transactionHash))})).catch((function(e){console.log("Transaction receipt error ",e),K((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))})).catch((function(e){"INSUFFICIENT_FUNDS"!==(null===e||void 0===e?void 0:e.code)?(K((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")})),console.log("Buy async error ",e)):K((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(t.address,' Buy failed - "INSUFFICIENT_FUNDS\n')}))}));case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Buy has error  ",e.t0),K((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e.t0,"\n")}));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})),c.s();case 6:if((r=c.n()).done){e.next=10;break}return e.delegateYield(o(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),c.e(e.t1);case 15:return e.prev=15,c.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)(S.a,{form:r,name:"DxSaleTab_form",className:"content_form",layout:"vertical",children:[Object(z.jsxs)(ce.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(re.a,{span:14,children:[Object(z.jsx)(S.a.Item,{label:"Token Address",name:"Token_Address",rules:[{required:!0,message:"Please input Token Address!"}],children:Object(z.jsx)(C.a,{placeholder:"Token Address",onChange:function(e){return d(e.target.value)}})}),Object(z.jsx)(S.a.Item,{label:"Gas price",name:"Gas_price (gwei)",rules:[{required:!0,message:"Please input Gas price!"}],initialValue:E,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},onChange:function(e){return U(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas limit (gwei)",name:"Gas_limit",rules:[{required:!0,message:"Please input Gas limit!"}],style:{marginTop:"30px"},initialValue:L,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},onChange:function(e){return M(e)}})}),Object(z.jsx)(S.a.Item,{label:"BNB amount",name:"Value",rules:[{required:!0,message:"Please input Value!"}],initialValue:v,children:Object(z.jsx)(oe.a,{min:0,style:{width:"100%"},onChange:function(e){return k(e)},step:"0.1"})}),Object(z.jsx)(S.a.Item,{name:"BuyPool",label:Object(z.jsxs)(z.Fragment,{children:["Pool ",Object(z.jsx)(Re.a,{style:{marginLeft:"10px",height:"30px"},showIcon:!0,message:"Be sure this is the pool of pair token",type:"warning"})]}),initialValue:P,children:Object(z.jsx)(Ve.a.Group,{onChange:function(e){return N(e.target.value)},value:P,children:Object(z.jsxs)(D.b,{direction:"vertical",children:[Object(z.jsx)(Ve.a,{value:ut,children:Object(z.jsx)(D.b,{direction:"vertical",children:"Pair BNB - token"})}),Object(z.jsx)(Ve.a,{value:dt,children:Object(z.jsx)(D.b,{direction:"vertical",children:"Pair BUSD - token"})})]})})})]}),Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(S.a.Item,{children:Object(z.jsx)(p.a,{title:"Accounts",bordered:!0,children:Object(z.jsx)(se.a.Group,{onChange:function(e){return O(e)},children:Object(z.jsx)(D.b,{direction:"vertical",children:Object(m.a)(t.values()).map((function(e,t){return Object(z.jsxs)(se.a,{value:e,children:["Account ",t+1," - ",e.bnbAmount," ",Object(z.jsx)("b",{children:"BNB"})]},e.address)}))})})})})})]}),Object(z.jsx)(S.a.Item,{children:Object(z.jsx)(b.a,{type:"primary",style:{width:"100px"},disabled:!H,onClick:function(){r.validateFields().then((function(e){X()}))},children:"Buy"})}),Object(z.jsx)(C.a.TextArea,{rows:10,placeholder:"logs...",value:R})]})},Ot=[{id:"t6",desctiption:"T-6",second:6},{id:"t5",desctiption:"T-5",second:5},{id:"t4",desctiption:"T-4",second:4},{id:"t3",desctiption:"T-3",second:3},{id:"t2",desctiption:"T-2",second:2}],mt=null,gt=null,yt=null,xt=null,wt=0,vt=new Set,St=0,kt={wrapperCol:{offset:8,span:16}},Tt=function(e){var t=e.accounts,n=e.nodeUrl,c=Object(a.useState)(""),r=Object(s.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)(0),d=Object(s.a)(l,2),j=d[0],f=d[1],h=S.a.useForm(),g=Object(s.a)(h,1)[0],y=Object(a.useState)(),v=Object(s.a)(y,2),k=v[0],T=v[1],I=Object(a.useState)(""),P=Object(s.a)(I,2),N=P[0],F=P[1],A=Object(a.useState)(!1),E=Object(s.a)(A,2),U=E[0],G=E[1],W=Object(a.useState)(me),L=Object(s.a)(W,2),M=L[0],V=L[1],q=Object(a.useState)("10"),R=Object(s.a)(q,2),K=R[0],H=R[1],J=Object(a.useState)("400000"),Y=Object(s.a)(J,2),Q=Y[0],X=Y[1],Z=Object(a.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)([]),ue=Object(s.a)(ne,2),de=ue[0],be=ue[1],pe=Object(a.useState)([Ot[2],Ot[3]]),he=Object(s.a)(pe,2),ge=he[0],ye=he[1],xe=de.length>0&&je(N)&&Oe(M)&&Oe(Q)&&Oe(K)&&parseFloat(M)>0&&parseFloat(Q)>0&&parseFloat(K);Object(a.useEffect)((function(){we()}),[n]);var we=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.startsWith("http")?(mt=new _.a.providers.JsonRpcProvider(n),console.log("http",n)):(mt=new _.a.providers.WebSocketProvider(n),gt=mt._websocket.onopen,yt=mt._websocket.onclose,mt._websocket.onopen=function(e){return ve(e)},mt._websocket.onclose=function(e){return Se(e)});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),xt=setInterval((function(){mt._websocket.readyState!==WebSocket.OPEN&&mt._websocket.readyState!==WebSocket.OPENING&&mt._websocket.close()}),1e3),gt&&gt(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(xt),we(),yt&&yt(e)};Object(a.useEffect)((function(){(function(){var e=Object(w.a)(x.a.mark((function e(){var t,n,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je(N)){e.next=16;break}return e.prev=1,t=new _.a.Contract(N,[{inputs:[],name:"poolSettings",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"rate",type:"uint256"},{internalType:"uint256",name:"softCap",type:"uint256"},{internalType:"uint256",name:"hardCap",type:"uint256"},{internalType:"uint256",name:"liquidityListingRate",type:"uint256"},{internalType:"uint256",name:"liquidityLockDays",type:"uint256"},{internalType:"uint128",name:"liquidityPercent",type:"uint128"},{internalType:"uint128",name:"refundType",type:"uint128"}],stateMutability:"view",type:"function",constant:!0,signature:"0xdb92feca"}],mt),e.next=5,t.poolSettings();case 5:n=e.sent,a=n.startTime.toNumber(),c=1e3*a,console.log("presaleStartTime ",c),Object(ie.a)(new Date,new Date(c))?G(!0):(G(!1),T(c)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),u.b.error("Error fetching presale start time");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}})()()}),[N]);Object(a.useEffect)((function(){return St=setTimeout((function(){f(function(){var e=Object(le.a)(k,new Date);if(e>0&&ee){var n,a=e/1e3,c=Object(ae.a)(ge);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(a<=r.second&&Math.ceil(a)===r.second&&!vt.has(r.second)){vt.add(r.second);var o,s=de.filter((function(e){return void 0!==t.get(e.fieldKey)})),i=Object(ae.a)(s);try{for(i.s();!(o=i.n()).done;){var l=o.value;console.log("Buy time when start, account: ".concat(l.address," is buying at presale adress: ").concat(N)),ke(l.privateKey)}}catch(j){i.e(j)}finally{i.f()}break}}}catch(j){c.e(j)}finally{c.f()}wt===de.length&&(wt=0,te(!1))}var u=6e4,d=36e5,b=24*d,p={};return e>0&&(p={day:Math.floor(e/b),hour:Math.floor(e%b/d),minute:Math.floor(e%d/u),second:Math.floor(e%u/1e3)}),p}())}),500),function(){clearInterval(St)}}),[j]);var ke=function(){var e=Object(w.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=null,e.prev=2,a=new B.a(t,mt),n=a.address,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),console.log("error fetching account ",e.t0),i((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(a.address," error fetching, check your private key!\n")})),e.abrupt("return");case 12:console.log("bnb ".concat(M," gasPrice ").concat(K," ").concat(Q)),e.prev=13,new _.a.Contract(N,["function contribute() external payable"],a).contribute({gasLimit:Number(Q.toString()),gasPrice:_.a.utils.parseUnits(K.toString(),"gwei"),value:_.a.utils.parseEther(M.toString(),18)}).then((function(e){i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(n," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,",waiting for transaction to be executed...\n")})),e.wait().then((function(e){i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(n," Buying successfully, Transaction receipt : https://www.bscscan.com/tx/").concat(e.transactionHash,"\n")})),u.b.success("Buy successfully"),wt++})).catch((function(e){console.log("Transaction receipt has error ",e),i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))})).catch((function(e){i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")})),console.log("contribute async error ",e)})),e.next=26;break;case 18:if(e.prev=18,e.t1=e.catch(13),console.log("contribute async error ",e.t1),"INSUFFICIENT_FUNDS"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=25;break}return u.b.error("Account: ".concat(a.address,' buy token failed - "INSUFFICIENT_FUNDS\n')),i((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(a.address,' buy token failed - "INSUFFICIENT_FUNDS\n')})),e.abrupt("return");case 25:i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e.t1,"\n")}));case 26:case"end":return e.stop()}}),e,null,[[2,7],[13,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(S.a,{form:g,name:"DxSaleTab_form",className:"content_form",layout:"vertical",children:[Object(z.jsxs)(ce.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(re.a,{span:14,children:[Object(z.jsx)(S.a.Item,{label:"Presale Contract",name:"presale address",rules:[{required:!0,message:"Please input presale address!"}],children:Object(z.jsx)(C.a,{placeholder:"Presale Contract",disabled:ee,onChange:function(e){G(!1),T(0),f({}),F(e.target.value)}})}),Object(z.jsxs)("p",{style:{marginTop:"10px",display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"Start at:"})," ",U?Object(z.jsx)("b",{style:{color:"red"},children:"Presale has already been over!"}):je(N)&&k?fe(k):"---"]}),Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"Countdown:"})," ",k&&!U&&"hour"in j?"".concat(j.day,":").concat(j.hour,":").concat(j.minute,":").concat(j.second):"---"]})]}),Object(z.jsx)(S.a.Item,{label:"BNB amount",name:"BNB_amount",rules:[{required:!0,message:"Please input BNB amount!"}],initialValue:M,step:"0.1",children:Object(z.jsx)(oe.a,{min:0,style:{width:"100%"},disabled:ee,onChange:function(e){return V(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas price",name:"Gas_price (gwei)",rules:[{required:!0,message:"Please input Gas price!"}],initialValue:K,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:ee,onChange:function(e){return H(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas limit (gwei)",name:"Gas_limit",rules:[{required:!0,message:"Please input Gas limit!"}],style:{marginTop:"30px"},initialValue:Q,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:ee,onChange:function(e){return X(e)}})}),Object(z.jsxs)(D.b,{direction:"vertical",children:["Buy when sale start",Object(z.jsx)(se.a.Group,{onChange:function(e){return ye(e)},defaultValue:ge,disabled:ee,children:Object(z.jsx)(D.b,{direction:"vertical",children:Ot.map((function(e){return Object(z.jsxs)(se.a,{value:e,children:["Buy at ",Object(z.jsx)("b",{children:e.desctiption})]})}))})})]})]}),Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(p.a,{title:"Accounts",bordered:!0,children:Object(z.jsx)(se.a.Group,{disabled:ee,onChange:function(e){return be(e)},children:Object(z.jsx)(D.b,{direction:"vertical",children:Object(m.a)(t.values()).map((function(e,t){return Object(z.jsxs)(se.a,{value:e,children:["Account ",t+1," - ",e.bnbAmount," ",Object(z.jsx)("b",{children:"BNB"})]},e.address)}))})})})})]}),Object(z.jsx)(S.a.Item,Object(O.a)(Object(O.a)({},kt),{},{children:Object(z.jsxs)(D.b,{children:[Object(z.jsx)(b.a,{type:"primary",style:{width:"100px"},disabled:ee||!xe,onClick:function(){g.validateFields().then((function(e){te(!0)}))},loading:ee,children:ee?"Waiting":"Buy"}),Object(z.jsx)(b.a,{type:"dashed",danger:!0,style:{width:"100px"},onClick:function(){te(!1),vt=new Set,wt=0},children:"Stop"})]})}))]}),Object(z.jsx)(C.a.TextArea,{rows:11,placeholder:"logs...",value:o})]})},It=null,Ct=null,Dt=null,Pt=null,Nt=0,_t=new Set,Bt=0,Ft={wrapperCol:{offset:8,span:16}},At=function(e){var t=e.accounts,n=e.nodeUrl,c=Object(a.useState)(""),r=Object(s.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)(0),d=Object(s.a)(l,2),j=d[0],f=d[1],h=S.a.useForm(),g=Object(s.a)(h,1)[0],y=Object(a.useState)(),v=Object(s.a)(y,2),k=v[0],T=v[1],I=Object(a.useState)(""),P=Object(s.a)(I,2),N=P[0],F=P[1],A=Object(a.useState)(!1),E=Object(s.a)(A,2),U=E[0],G=E[1],W=Object(a.useState)(me),L=Object(s.a)(W,2),M=L[0],V=L[1],q=Object(a.useState)("10"),R=Object(s.a)(q,2),K=R[0],H=R[1],J=Object(a.useState)("250000"),Y=Object(s.a)(J,2),Q=Y[0],X=Y[1],Z=Object(a.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)([]),ue=Object(s.a)(ne,2),de=ue[0],be=ue[1],pe=Object(a.useState)([Ot[2],Ot[3],Ot[4]]),he=Object(s.a)(pe,2),ge=he[0],ye=he[1],xe=de.length>0&&je(N)&&Oe(M)&&Oe(Q)&&Oe(K)&&parseFloat(M)>0&&parseFloat(Q)>0&&parseFloat(K);Object(a.useEffect)((function(){we()}),[n]);var we=function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.startsWith("http")?(It=new _.a.providers.JsonRpcProvider(n),console.log("http",n)):(It=new _.a.providers.WebSocketProvider(n),Ct=It._websocket.onopen,Dt=It._websocket.onclose,It._websocket.onopen=function(e){return ve(e)},It._websocket.onclose=function(e){return Se(e)});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.info("%c Connected to the WebSocket!","color: green"),Pt=setInterval((function(){It._websocket.readyState!==WebSocket.OPEN&&It._websocket.readyState!==WebSocket.OPENING&&It._websocket.close()}),1e3),Ct&&Ct(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e){console.info("%c WebSocket connection lost! Reconnecting...","color: yellow"),clearInterval(Pt),we(),Dt&&Dt(e)};Object(a.useEffect)((function(){(function(){var e=Object(w.a)(x.a.mark((function e(){var t,n,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je(N)){e.next=16;break}return e.prev=1,t=new _.a.Contract(N,[{inputs:[],name:"getInfo",outputs:[{internalType:"uint16",name:"",type:"uint16"},{components:[{internalType:"contract IERC20",name:"saleToken",type:"address"},{internalType:"contract IERC20",name:"baseToken",type:"address"},{internalType:"uint256",name:"tokenPrice",type:"uint256"},{internalType:"uint256",name:"maxSpendPerBuyer",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"hardCap",type:"uint256"},{internalType:"uint256",name:"softCap",type:"uint256"},{internalType:"uint256",name:"liquidityPercent",type:"uint256"},{internalType:"uint256",name:"listingRate",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"lockPeriod",type:"uint256"}],internalType:"struct PresaleToken.PresaleInfo",name:"",type:"tuple"},{components:[{internalType:"address payable",name:"presaleOwner",type:"address"},{internalType:"bool",name:"presaleInETH",type:"bool"},{internalType:"uint128",name:"wlMaxParticipants",type:"uint128"},{internalType:"uint128",name:"wlAssigned",type:"uint128"},{internalType:"uint256",name:"presaleType",type:"uint256"},{internalType:"bool",name:"whitelistEnable",type:"bool"}],internalType:"struct PresaleToken.PresaleInfoMore",name:"",type:"tuple"},{components:[{internalType:"uint256",name:"apesBaseFee",type:"uint256"},{internalType:"uint256",name:"apesTokenFee",type:"uint256"},{internalType:"uint256",name:"referralFee",type:"uint256"},{internalType:"address payable",name:"referral1",type:"address"},{internalType:"address payable",name:"referral2",type:"address"}],internalType:"struct PresaleToken.PresaleFeeInfo",name:"",type:"tuple"},{components:[{internalType:"bool",name:"LP_GENERATION_COMPLETE",type:"bool"},{internalType:"bool",name:"FORCE_FAILED",type:"bool"},{internalType:"uint256",name:"totalBaseTokenCollected",type:"uint256"},{internalType:"uint256",name:"totalSaleTokenSold",type:"uint256"},{internalType:"uint256",name:"totalSaleTokenWithDrawn",type:"uint256"},{internalType:"uint256",name:"totalBaseTokenWithDrawn",type:"uint256"},{internalType:"uint256",name:"roundOneLength",type:"uint256"},{internalType:"uint256",name:"numBuyers",type:"uint256"},{internalType:"uint256",name:"presaleEndDate",type:"uint256"}],internalType:"struct PresaleToken.PresaleStatus",name:"",type:"tuple"},{components:[{internalType:"bool",name:"requestVesting",type:"bool"},{internalType:"bool",name:"implementVesting",type:"bool"},{internalType:"bool",name:"linearLock",type:"bool"},{internalType:"uint256",name:"vestingStartEmission",type:"uint256"},{internalType:"uint256",name:"vestingEndEmission",type:"uint256"},{internalType:"uint256",name:"vestingPercentage",type:"uint256"}],internalType:"struct PresaleToken.PresaleVesting",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],It),e.next=5,t.getInfo();case 5:n=e.sent,a=_.a.utils.formatUnits(n[1].startTime)*Math.pow(10,18),c=1e3*a,console.log("presaleStartTime ",c),Object(ie.a)(new Date,new Date(c))?G(!0):(G(!1),T(c)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),u.b.error("Error fetching presale start time");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}})()()}),[N]);Object(a.useEffect)((function(){return Bt=setTimeout((function(){f(function(){var e=Object(le.a)(k,new Date);if(e>0&&ee){var n,a=e/1e3,c=Object(ae.a)(ge);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(a<=r.second&&Math.ceil(a)===r.second&&!_t.has(r.second)){_t.add(r.second);var o,s=de.filter((function(e){return void 0!==t.get(e.fieldKey)})),i=Object(ae.a)(s);try{for(i.s();!(o=i.n()).done;){var l=o.value;console.log("Buy time when start, account: ".concat(l.address," is buying at presale adress: ").concat(N)),ke(l.privateKey)}}catch(j){i.e(j)}finally{i.f()}break}}}catch(j){c.e(j)}finally{c.f()}Nt===de.length&&(Nt=0,te(!1))}var u=6e4,d=36e5,b=24*d,p={};return e>0&&(p={day:Math.floor(e/b),hour:Math.floor(e%b/d),minute:Math.floor(e%d/u),second:Math.floor(e%u/1e3)}),p}())}),500),function(){clearInterval(Bt)}}),[j]);var ke=function(){var e=Object(w.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=null,e.prev=2,a=new B.a(t,It),n=a.address,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),console.log("error fetching account ",e.t0),i((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(a.address," error fetching, check your private key!\n")})),e.abrupt("return");case 12:console.log("bnb ".concat(M," gasPrice ").concat(K," ").concat(Q)),e.prev=13,new _.a.Contract(N,[{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"userDeposit",outputs:[],stateMutability:"payable",type:"function"}],a).userDeposit("0",{gasLimit:Number(Q.toString()),gasPrice:_.a.utils.parseUnits(K.toString(),"gwei"),value:_.a.utils.parseEther(M.toString(),18)}).then((function(e){i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(n," Hash: ").concat(e.hash,", nonce: ").concat(e.nonce,", gasPrice: ").concat(_.a.utils.formatUnits(e.gasPrice,"gwei"),", gasLimit: ").concat(e.gasLimit,",waiting for transaction to be executed...\n")})),e.wait().then((function(e){i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," Account: ").concat(n," Buying successfully, Transaction receipt : https://www.bscscan.com/tx/").concat(e.transactionHash,"\n")})),u.b.success("Buy successfully"),Nt++})).catch((function(e){console.log("Transaction receipt has error ",e),i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")}))}))})).catch((function(e){i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e,"\n")})),console.log("contribute async error ",e)})),e.next=26;break;case 18:if(e.prev=18,e.t1=e.catch(13),console.log("contribute async error ",e.t1),"INSUFFICIENT_FUNDS"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=25;break}return u.b.error("Account: ".concat(a.address,' buy token failed - "INSUFFICIENT_FUNDS\n')),i((function(e){return"".concat(e).concat(new Date(Date.now()).toISOString()," Account: ").concat(a.address,' buy token failed - "INSUFFICIENT_FUNDS\n')})),e.abrupt("return");case 25:i((function(t){return"".concat(t).concat(new Date(Date.now()).toISOString()," ").concat(e.t1,"\n")}));case 26:case"end":return e.stop()}}),e,null,[[2,7],[13,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(S.a,{form:g,name:"DxSaleTab_form",className:"content_form",layout:"vertical",children:[Object(z.jsxs)(ce.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(re.a,{span:14,children:[Object(z.jsx)(S.a.Item,{label:"Presale Contract",name:"presale address",rules:[{required:!0,message:"Please input presale address!"}],children:Object(z.jsx)(C.a,{placeholder:"Presale Contract",disabled:ee,onChange:function(e){G(!1),T(0),f({}),F(e.target.value)}})}),Object(z.jsxs)("p",{style:{marginTop:"10px",display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"Start at:"})," ",U?Object(z.jsx)("b",{style:{color:"red"},children:"Presale has already been over!"}):je(N)&&k?fe(k):"---"]}),Object(z.jsxs)("span",{children:[Object(z.jsx)("b",{children:"Countdown:"})," ",k&&!U&&"hour"in j?"".concat(j.day,":").concat(j.hour,":").concat(j.minute,":").concat(j.second):"---"]})]}),Object(z.jsx)(S.a.Item,{label:"BNB amount",name:"BNB_amount",rules:[{required:!0,message:"Please input BNB amount!"}],initialValue:M,step:"0.1",children:Object(z.jsx)(oe.a,{min:0,style:{width:"100%"},disabled:ee,onChange:function(e){return V(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas price",name:"Gas_price (gwei)",rules:[{required:!0,message:"Please input Gas price!"}],initialValue:K,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:ee,onChange:function(e){return H(e)}})}),Object(z.jsx)(S.a.Item,{label:"Gas limit (gwei)",name:"Gas_limit",rules:[{required:!0,message:"Please input Gas limit!"}],style:{marginTop:"30px"},initialValue:Q,children:Object(z.jsx)(oe.a,{min:1,style:{width:"100%"},disabled:ee,onChange:function(e){return X(e)}})}),Object(z.jsxs)(D.b,{direction:"vertical",children:["Buy when sale start",Object(z.jsx)(se.a.Group,{onChange:function(e){return ye(e)},defaultValue:ge,disabled:ee,children:Object(z.jsx)(D.b,{direction:"vertical",children:Ot.map((function(e){return Object(z.jsxs)(se.a,{value:e,children:["Buy at ",Object(z.jsx)("b",{children:e.desctiption})]})}))})})]})]}),Object(z.jsx)(re.a,{span:8,children:Object(z.jsx)(p.a,{title:"Accounts",bordered:!0,children:Object(z.jsx)(se.a.Group,{disabled:ee,onChange:function(e){return be(e)},children:Object(z.jsx)(D.b,{direction:"vertical",children:Object(m.a)(t.values()).map((function(e,t){return Object(z.jsxs)(se.a,{value:e,children:["Account ",t+1," - ",e.bnbAmount," ",Object(z.jsx)("b",{children:"BNB"})]},e.address)}))})})})})]}),Object(z.jsx)(S.a.Item,Object(O.a)(Object(O.a)({},Ft),{},{children:Object(z.jsxs)(D.b,{children:[Object(z.jsx)(b.a,{type:"primary",style:{width:"100px"},disabled:ee||!xe,onClick:function(){g.validateFields().then((function(e){te(!0)}))},loading:ee,children:ee?"Waiting":"Buy"}),Object(z.jsx)(b.a,{type:"dashed",danger:!0,style:{width:"100px"},onClick:function(){te(!1),_t=new Set,Nt=0},children:"Stop"})]})}))]}),Object(z.jsx)(C.a.TextArea,{rows:11,placeholder:"logs...",value:o})]})},Et=(n(231),function(e){var t=e.setIsLogin,n=e.alertMsg,c=e.setAlertMsg,r=S.a.useForm(),o=Object(s.a)(r,1)[0],i=Object(a.useState)(!1),l=Object(s.a)(i,2),d=l[0],p=l[1],j=Object(a.useState)(!1),f=Object(s.a)(j,2),h=(f[0],f[1]);return Object(z.jsx)(T.a,{title:"",visible:!0,width:700,footer:null,closable:!1,children:Object(z.jsxs)(S.a,{name:"basi1c",labelCol:{span:6},wrapperCol:{span:12},initialValues:{remember:!0},form:o,onFinish:function(e){p(!0);var n=e.username,a=e.password;q(n,a).then((function(e){console.log("resp ",e),1===e.data.code?(u.b.success(e.data.message),M({token:e.data.token,username:e.data.username,expireDate:e.data.expireDate}),t(!0)):c(e.data.message)})).catch((function(e){console.log("err ",e)})).finally((function(){p(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(z.jsx)(S.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(z.jsx)(C.a,{})}),Object(z.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(z.jsx)(C.a.Password,{})}),n?Object(z.jsx)(S.a.Item,{wrapperCol:{offset:6,span:16},children:Object(z.jsx)("p",{style:{color:"red"},children:n})}):null,Object(z.jsxs)(S.a.Item,{wrapperCol:{offset:6,span:16},children:[Object(z.jsx)(b.a,{type:"primary",htmlType:"submit",loading:d,children:"\u0110\u0103ng nh\u1eadp"}),Object(z.jsx)(b.a,{htmlType:"button",style:{margin:"0 8px"},onClick:function(){o.validateFields().then((function(e){h(!0);var n=e.username,a=e.password;console.log("username ",n),R(n,a).then((function(e){console.log("resp ",e),1===e.data.code?(u.b.success(e.data.message),M({token:e.data.token,username:e.data.username,expireDate:e.data.expireDate}),t(!0)):c(e.data.message)})).catch((function(e){console.log("err ",e)})).finally((function(){h(!1)}))}))},children:"\u0110\u0103ng k\xfd"})]})]})})}),Ut=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEFAULT_NODE_URL,i.a.TabPane),Gt=l.a.Content,Wt=0;var Lt=function(){var e=Object(a.useState)(new Map),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("ws://194.233.73.12:3000"),o=Object(s.a)(r,2),O=o[0],m=o[1],g=Object(a.useState)("ws://194.233.73.12:3000"),y=Object(s.a)(g,2),x=y[0],w=y[1],v=Object(a.useState)(!!L()),S=Object(s.a)(v,2),k=S[0],T=S[1],I=Object(a.useState)(""),C=Object(s.a)(I,2),D=C[0],P=C[1],N=Object(a.useState)(""),_=Object(s.a)(N,2),B=_[0],F=_[1],A=Object(a.useState)(!1),E=Object(s.a)(A,2),U=E[0],G=E[1];Object(a.useEffect)((function(){W(),G(!0);var e=L();e&&J(e.username,e.token).then((function(e){1===e.data.code?(w(e.data.autoSellNodeUrl),m(e.data.defaultUrl)):u.b.error(e.data.message)})).finally((function(){G(!1)}))}),[]),Object(a.useEffect)((function(){return Wt=setInterval((function(){W()}),3e4),function(){clearInterval(Wt)}}));var W=function(){var e=L();e&&H(e.username,e.token).then((function(t){t.data.noneExpired?t.data.validToken?1!==t.data.status?(V(),T(!1),P("T\xe0i kho\u1ea3n \u0111\xe3 b\u1ecb kho\xe1!"),Y(e.username,e.token)):F({expireDate:t.data.expireDate,username:t.data.username}):(V(),T(!1),P("Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i!"),Y(e.username,e.token)):(P("Vui l\xf2ng gia h\u1ea1n \u0111\u1ec3 ti\u1ebfp t\u1ee5c s\u1eed d\u1ee5ng tool!"),Y(e.username,e.token),V(),T(!1))})).catch((function(e){}))};return Object(z.jsx)(f.a,{children:Object(z.jsxs)(l.a,{children:[Object(z.jsxs)(j.Header,{style:{backgroundColor:"white",display:"flex",justifyContent:"space-between"},children:[Object(z.jsx)("div",{}),Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(z.jsx)("div",{style:{height:"100px"},children:Object(z.jsx)("a",{href:"https://gemslab.news/",children:Object(z.jsx)("img",{style:{height:"50px"},alt:"logo",src:"https://gemslab.news/wp-content/uploads/2021/08/logo-GEMS-LAB-01.png"})})}),Object(z.jsx)("div",{children:Object(z.jsxs)(d.a,{mode:"horizontal",style:{backgroundColor:"white",width:"100%",marginTop:"1px"},children:[Object(z.jsx)(d.a.Item,{children:Object(z.jsx)("a",{href:"https://gemslab.news/",children:"Homepage"})},"1"),Object(z.jsx)(d.a.Item,{children:Object(z.jsx)("a",{href:"https://tools.gemslab.news/",children:"Gemslab Tools"})},"2")]})})]}),Object(z.jsx)(b.a,{icon:Object(z.jsx)(h.a,{}),onClick:function(){var e=L();V(),T(!1),Y(e.username,e.token)},style:{marginTop:"20px"},type:"link",danger:!0,children:"Logout"})]}),Object(z.jsx)("div",{style:{height:"50px",textAlign:"center",backgroundColor:"white"},children:Object(z.jsxs)("p",{style:{marginTop:"10px"},children:["Discussion - Q&A - Tools Manual, please visit the telegram group at ",Object(z.jsx)("a",{href:"https://t.me/gemslab",children:"https://t.me/gemslab"})]})}),Object(z.jsx)(Gt,{style:{backgroundColor:"white"},children:k?Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(p.a,{loading:U,children:""!==O&&""!==x?Object(z.jsxs)(i.a,{type:"card",tabPosition:"left",size:"large",defaultActiveKey:"1",children:[Object(z.jsx)(Ut,{tab:"Account",children:Object(z.jsx)(ne,{inFo:B,accounts:n,setAccounts:c,nodeUrl:O,setNodeUrl:m})},"1"),Object(z.jsx)(Ut,{tab:"Dxsale",children:Object(z.jsx)(Pe,{accounts:n,nodeUrl:O})},"2"),Object(z.jsx)(Ut,{tab:"Unicrypt",children:Object(z.jsx)(Me,{accounts:n,nodeUrl:O})},"3"),Object(z.jsx)(Ut,{tab:"PinkSale",children:Object(z.jsx)(Tt,{accounts:n,nodeUrl:O})},"6"),Object(z.jsx)(Ut,{tab:"ApeSale",children:Object(z.jsx)(At,{accounts:n,nodeUrl:O})},"7"),Object(z.jsx)(Ut,{tab:"Auto-Sell Token",children:Object(z.jsx)(lt,{accounts:n,nodeUrl:x})},"4"),Object(z.jsx)(Ut,{tab:"Buy Token",children:Object(z.jsx)(ht,{accounts:n,nodeUrl:O})},"5")]}):null})}):Object(z.jsx)(Et,{setIsLogin:T,alertMsg:D,setAlertMsg:P})})]})})},Mt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,493)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};n(467);o.a.render(Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(Lt,{})}),document.getElementById("root")),Mt()}},[[468,1,2]]]);